<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
  <template id="report_purchase_quotation_document">
    <t t-call="web.html_container">
      <t t-foreach="docs" t-as="o">
        <div class="header">
          <div style="position:relative; width:100%; overflow:hidden">
            <img
              t-att-src="'data:image/png;base64,%s' % to_text(res_company.logo)"
              style="width:200px !important;"

            />
            <span style="float:right;">
              <div>
                N°:
                <span t-field="o.name"/>
              </div>
              <div>
                Fecha Solicitud:
                <span t-field="o.requisition_id.ordering_date"/>
              </div>
              <div>
                Solicitado por:
                <span t-field="o.requisition_id.user_id"/>
              </div>
            </span>
          </div>
          <div style="text-align:center !important; position: relative; width: 100%;">
            <h2>Registro Solicitud de Compra</h2>
          </div>
        </div>
        <div class="page">
          <table style="width:100%; margin-bottom:50px !important;">
            <tr>
              <th colspan="4" style="text-align:center !important;border-bottom:1px solid;">
                CENTROS DE COSTO
              </th>
            </tr>
            <t t-foreach="o.get_analytic_accounts()" t-as="aa">
              <tr style="border-bottom:1px solid;">
                <td>
                  <span t-field="aa[0].code"/>
                </td>
                <td>
                  <span t-field="aa[0].name"/>
                </td>
                <td>
                  <t t-if="len(aa) == 2">
                    <span t-field="aa[1].code"/>
                  </t>
                </td>
                <td>
                  <t t-if="len(aa) == 2">
                    <span t-field="aa[1].name"/>
                  </t>
                </td>
              </tr>
            </t>
          </table>
          <h3>Proveedor:</h3>
          <table style="border-top: 1px solid;margin-bottom:20px;">
            <tr>
              <td>Nombre:</td>
              <td>
                <span t-field="o.partner_id.name"/>
              </td>
            </tr>
            <tr>
              <td>Correo:</td>
              <td>
                <span t-field="o.partner_id.email"/>
              </td>
            </tr>
            <tr>
              <td>Fono:</td>
              <td>
                <span t-field="o.partner_id.phone"/>
                <span t-field="o.partner_id.mobile"/>
              </td>
            </tr>
          </table>
          <table style="width:100% !important;">
            <tr style="text-align:left;border-bottom:1px solid;">
              <th>DESCRIPCIÓN</th>
              <th>ACTIVIDAD</th>
              <th>CANTIDAD</th>
              <th>EMBALAJE</th>
              <th>CENTRO DE COSTO</th>
            </tr>
            <t t-foreach="o.order_line" t-as="order_line">
              <tr>
                <td>
                  <span t-field="order_line.product_id.name"/>
                </td>
                <td></td>
                <td>
                  <span t-field="order_line.product_qty"/>
                </td>
                <td>
                  <span t-field="order_line.product_uom"/>
                </td>
                <td>
                  <span t-field="order_line.account_analytic_id"/>
                </td>
              </tr>
            </t>
          </table>
        </div>
        <div class="footer">
          <table style="width:100%; border-top:1px solid;text-align:center">
            <t t-foreach="o.message_ids" t-as="message">
              <tr>
                <td><span t-field="message.name" /></td>
              </tr>
            </t>
            <tr>
              <td>

              </td>
              <td>
                <span t-field="o.requisition_id.user_id" />

              </td>
            </tr>
            <tr>
              <td>
                Visto Bueno Jefe de Área / Fecha
              </td>
              <td>
                Visto Bueno Jefe de Operaciones / Fecha
              </td>
            </tr>
          </table>
        </div>
      </t>
    </t>


  </template>
  <report id="action_purchase_quotation_report"
          string="Solicitud de Compra"
          model="purchase.order"
          report_type="qweb-pdf"
          name="dimabe_purchase_process.report_purchase_quotation_document"
  />
</odoo>